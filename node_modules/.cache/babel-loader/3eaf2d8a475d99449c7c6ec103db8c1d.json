{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nirma\\\\data\\\\ap_2021_2022\\\\it-project\\\\ProjectAp2022\\\\it-project-frontend\\\\src\\\\components\\\\Logout\\\\LogoutButton.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Logout = () => {\n  _s();\n\n  const [err, setErr] = useState(false);\n  const [success, setsuccess] = useState(false);\n  const [errString, setErrString] = useState([]);\n\n  const send = event => {\n    event.preventDefault();\n    console.log();\n    fetch(\"https://localhost:44391/api/Auth/loginout\", {\n      method: 'GET',\n      // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors',\n      // no-cors, *cors, same-origin\n      // cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached,\n      credentials: \"same-origin\",\n      headers: {\n        'Content-Type': 'application/json',\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Headers\": \"Content-Type, Depth, User-Agent, X-File-Size, X-Requested-With, If-Modified-Since, X-File-Name, Cache-Control\",\n        \"Access-Control-Allow-Methods\": \"OPTIONS, GET, POST\"\n      }\n    }).then(e => e.json()).then(e => {\n      console.log(e);\n\n      if (e.hasError || typeof e.errors == \"object\") {\n        let hold = [];\n\n        if (typeof e.errors == \"object\") {\n          for (const [key, value] of Object.entries(e.errors)) {\n            hold.push(\"-\" + key + \": \" + value);\n          }\n        } else {\n          hold.push(e.error);\n        }\n\n        setErr(true);\n        setErrString(hold);\n      } else {\n        setErr(false);\n      }\n\n      if (!e.hasError && e.errors === undefined) {\n        //auth.destroy();\n        setsuccess(true);\n        window.location.reload();\n      } else {\n        setsuccess(false);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      onClick: send,\n      children: \"Log out\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }, this)\n  }, void 0, false);\n};\n\n_s(Logout, \"ey7XXE9QN/J0tbm8D2g3rj0GLoU=\");\n\n_c = Logout;\nexport default Logout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Logout\");","map":{"version":3,"names":["useState","Logout","err","setErr","success","setsuccess","errString","setErrString","send","event","preventDefault","console","log","fetch","method","mode","credentials","headers","then","e","json","hasError","errors","hold","key","value","Object","entries","push","error","undefined","window","location","reload","catch"],"sources":["C:/Users/Nirma/data/ap_2021_2022/it-project/ProjectAp2022/it-project-frontend/src/components/Logout/LogoutButton.tsx"],"sourcesContent":["import { ChangeEventHandler, MouseEventHandler, useReducer, useState } from \"react\";\r\nimport cookie from \"../../class/Cookie/Cookie\";\r\nimport ILoginUser from \"../../interface/ILoginForm/ILoginUser\";\r\nimport Alert from \"../Alert/Alert\";\r\nimport auth from \"../../class/Auth/Auth\";\r\n\r\nconst Logout=()=>{\r\n\r\n    const [err,setErr] = useState<boolean>(false);\r\n    const [success,setsuccess] = useState<boolean>(false);\r\n    const [errString,setErrString] = useState<string[]>([]);\r\n\r\n\r\n\r\n      const send :MouseEventHandler<HTMLButtonElement> = (event)=>{\r\n        event.preventDefault()\r\n        console.log()\r\n            fetch(\"https://localhost:44391/api/Auth/loginout\",{\r\n             \r\n                    method: 'GET', // *GET, POST, PUT, DELETE, etc.\r\n                    mode: 'cors', // no-cors, *cors, same-origin\r\n                   // cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached,\r\n                   credentials:\"same-origin\",\r\n                   headers: {\r\n                    'Content-Type': 'application/json',\r\n                    \"Access-Control-Allow-Origin\": \"*\",\r\n                    \"Access-Control-Allow-Headers\": \"Content-Type, Depth, User-Agent, X-File-Size, X-Requested-With, If-Modified-Since, X-File-Name, Cache-Control\",\r\n                    \"Access-Control-Allow-Methods\": \"OPTIONS, GET, POST\"\r\n\r\n                  },\r\n                    \r\n            }).then(e=>e.json())\r\n            .then(e => {\r\n                \r\n                console.log(e)\r\n                if(e.hasError || typeof e.errors == \"object\"){\r\n\r\n                    let hold = [];\r\n                    if(typeof e.errors == \"object\"){\r\n                    for (const [key, value] of Object.entries(e.errors)) {\r\n                       hold.push(\"-\"+key+\": \"+value);\r\n                    }                   \r\n                 }else{\r\n                    hold.push(e.error );\r\n                 }\r\n                    \r\n                    setErr(true)\r\n\r\n                    setErrString(hold);\r\n                    \r\n\r\n\r\n                }else{\r\n                    setErr(false)\r\n                }\r\n\r\n                if(!e.hasError && e.errors === undefined){\r\n                    //auth.destroy();\r\n                    setsuccess(true)\r\n                    window.location.reload();\r\n                }else{\r\n                    setsuccess(false)\r\n                }\r\n            })\r\n            .catch(err=> console.log(err))\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return(\r\n\r\n        <>\r\n\r\n                        <button type=\"submit\" className=\"btn btn-primary\" onClick={send}>Log out</button>\r\n\r\n        \r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default Logout;"],"mappings":";;;AAAA,SAA4DA,QAA5D,QAA4E,OAA5E;;;;AAMA,MAAMC,MAAM,GAAC,MAAI;EAAA;;EAEb,MAAM,CAACC,GAAD,EAAKC,MAAL,IAAeH,QAAQ,CAAU,KAAV,CAA7B;EACA,MAAM,CAACI,OAAD,EAASC,UAAT,IAAuBL,QAAQ,CAAU,KAAV,CAArC;EACA,MAAM,CAACM,SAAD,EAAWC,YAAX,IAA2BP,QAAQ,CAAW,EAAX,CAAzC;;EAIE,MAAMQ,IAA0C,GAAIC,KAAD,IAAS;IAC1DA,KAAK,CAACC,cAAN;IACAC,OAAO,CAACC,GAAR;IACIC,KAAK,CAAC,2CAAD,EAA6C;MAE1CC,MAAM,EAAE,KAFkC;MAE3B;MACfC,IAAI,EAAE,MAHoC;MAG5B;MACf;MACAC,WAAW,EAAC,aAL+B;MAM3CC,OAAO,EAAE;QACR,gBAAgB,kBADR;QAER,+BAA+B,GAFvB;QAGR,gCAAgC,+GAHxB;QAIR,gCAAgC;MAJxB;IANkC,CAA7C,CAAL,CAcGC,IAdH,CAcQC,CAAC,IAAEA,CAAC,CAACC,IAAF,EAdX,EAeCF,IAfD,CAeMC,CAAC,IAAI;MAEPR,OAAO,CAACC,GAAR,CAAYO,CAAZ;;MACA,IAAGA,CAAC,CAACE,QAAF,IAAc,OAAOF,CAAC,CAACG,MAAT,IAAmB,QAApC,EAA6C;QAEzC,IAAIC,IAAI,GAAG,EAAX;;QACA,IAAG,OAAOJ,CAAC,CAACG,MAAT,IAAmB,QAAtB,EAA+B;UAC/B,KAAK,MAAM,CAACE,GAAD,EAAMC,KAAN,CAAX,IAA2BC,MAAM,CAACC,OAAP,CAAeR,CAAC,CAACG,MAAjB,CAA3B,EAAqD;YAClDC,IAAI,CAACK,IAAL,CAAU,MAAIJ,GAAJ,GAAQ,IAAR,GAAaC,KAAvB;UACF;QACH,CAJE,MAIE;UACFF,IAAI,CAACK,IAAL,CAAUT,CAAC,CAACU,KAAZ;QACF;;QAEE1B,MAAM,CAAC,IAAD,CAAN;QAEAI,YAAY,CAACgB,IAAD,CAAZ;MAIH,CAjBD,MAiBK;QACDpB,MAAM,CAAC,KAAD,CAAN;MACH;;MAED,IAAG,CAACgB,CAAC,CAACE,QAAH,IAAeF,CAAC,CAACG,MAAF,KAAaQ,SAA/B,EAAyC;QACrC;QACAzB,UAAU,CAAC,IAAD,CAAV;QACA0B,MAAM,CAACC,QAAP,CAAgBC,MAAhB;MACH,CAJD,MAIK;QACD5B,UAAU,CAAC,KAAD,CAAV;MACH;IACJ,CA9CD,EA+CC6B,KA/CD,CA+COhC,GAAG,IAAGS,OAAO,CAACC,GAAR,CAAYV,GAAZ,CA/Cb;EAgDL,CAnDD;;EA2DF,oBAEI;IAAA,uBAEgB;MAAQ,IAAI,EAAC,QAAb;MAAsB,SAAS,EAAC,iBAAhC;MAAkD,OAAO,EAAEM,IAA3D;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAFhB,iBAFJ;AAUH,CA7ED;;GAAMP,M;;KAAAA,M;AA+EN,eAAeA,MAAf"},"metadata":{},"sourceType":"module"}