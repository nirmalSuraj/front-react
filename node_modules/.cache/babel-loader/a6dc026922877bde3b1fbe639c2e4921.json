{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Nirma/data/ap_2021_2022/it-project/ProjectAp2022/it-project-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Nirma/data/ap_2021_2022/it-project/ProjectAp2022/it-project-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Nirma\\\\data\\\\ap_2021_2022\\\\it-project\\\\ProjectAp2022\\\\it-project-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from'react';import styles from'./App.module.css';import NavBar from'./components/NavBar/NavBar';import{BrowserRouter,Redirect,Route,Switch}from'react-router-dom';import HomeScreen from'./screens/HomeScreen/HomeScreen';import ContactScreen from'./screens/ContactScreen/ContactScreen';import HistoryScreen from'./screens/HistoryScreen/HistoryScreen';import LoginScreen from'./screens/LoginScreen/LoginScreen';import{SiteContext}from'./context';import Register from'./screens/Register/Register';import{Container}from'react-bootstrap';import auth from\"./class/Auth/Auth\";import cookie from\"./class/Cookie/Cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var base=cookie.GetCookies(\"base\");function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userSessionHistoryCompanies=_useState2[0],setHistoryCompanies=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),companies=_useState4[0],setCompanies=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),companyVAT=_useState6[0],SetInputVat=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),vatArray=_useState8[0],setVatArray=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),companyInfo=_useState10[0],setCompanyInfo=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loggedin=_useState12[0],setAuth=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),loading=_useState14[0],setLoading=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),search=_useState16[0],setSearch=_useState16[1];var setSearchHistory=function setSearchHistory(search){setSearch(search);};var submitButtonCompareForm=function submitButtonCompareForm(event){event.preventDefault();SetInputVat(vatArray);setVatArray([]);};var HistoryCall=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);url=\"\".concat(base,\"/api/history/history/all\");if(search.length>0)url=\"\".concat(base,\"/api/history/\").concat(search,\"/history\");_context.next=6;return fetch(url,{method:'GET',headers:{'content-type':'application/json','Access-Control-Allow-Origin':'*','Authorization':\"Bearer \".concat(cookie.GetCookies(\"token\"))}});case 6:response=_context.sent;auth.destroy(response.status);_context.next=10;return response.json();case 10:data=_context.sent;return _context.abrupt(\"return\",data);case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function HistoryCall(){return _ref.apply(this,arguments);};}();useEffect(function(){if(cookie.GetCookies(\"base\")==\"\"){cookie.SetCookie(\"base\",\"https://localhost:44391\",2);cookie.SetCookie(\"checkBase\",\"flase\",2);cookie.DeleteCookie(\"auth\");cookie.DeleteCookie(\"token\");}if(auth.Auth()){HistoryCall().then(function(e){if(e.sendOBJ!=null){setHistoryCompanies(e.sendOBJ.history);setLoading(false);console.log(loading);}});}},[loggedin,search]);var vat='123';return/*#__PURE__*/_jsx(SiteContext.Provider,{value:{companies:companies},children:/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styles.App),children:/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/home\",exact:true,children:/*#__PURE__*/_jsx(HomeScreen,{vatArray:vatArray,setVatArray:setVatArray,submit:submitButtonCompareForm,companyVAT:companyVAT,companyInfo:companyInfo,setCompanyInfo:setCompanyInfo,userSessionHistoryCompanies:userSessionHistoryCompanies})}),/*#__PURE__*/_jsx(Route,{path:\"/contact\",exact:true,children:/*#__PURE__*/_jsx(ContactScreen,{userSessionHistoryCompanies:userSessionHistoryCompanies})}),/*#__PURE__*/_jsx(Route,{path:\"/UserHistory\",exact:true,children:/*#__PURE__*/_jsx(HistoryScreen,{userSessionHistoryCompanies:userSessionHistoryCompanies,setHistoryCompanies:setHistoryCompanies,setSearch:setSearchHistory})}),/*#__PURE__*/_jsx(Route,{path:\"/Login\",exact:true,children:/*#__PURE__*/_jsx(LoginScreen,{setAuth:setAuth,loggedin:loggedin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",exact:true,children:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(Redirect,{to:\"/home\"})})]})})]})})});}//commentje\nexport default App;","map":{"version":3,"names":["React","useState","useEffect","styles","NavBar","BrowserRouter","Redirect","Route","Switch","HomeScreen","ContactScreen","HistoryScreen","LoginScreen","SiteContext","Register","Container","auth","cookie","base","GetCookies","App","userSessionHistoryCompanies","setHistoryCompanies","companies","setCompanies","companyVAT","SetInputVat","vatArray","setVatArray","companyInfo","setCompanyInfo","loggedin","setAuth","loading","setLoading","search","setSearch","setSearchHistory","submitButtonCompareForm","event","preventDefault","HistoryCall","url","length","fetch","method","headers","response","destroy","status","json","data","console","log","SetCookie","DeleteCookie","Auth","then","e","sendOBJ","history","vat"],"sources":["C:/Users/Nirma/data/ap_2021_2022/it-project/ProjectAp2022/it-project-frontend/src/App.tsx"],"sourcesContent":["import React, { ChangeEventHandler, MouseEventHandler, useState, useEffect} from 'react';\r\nimport styles from './App.module.css';\r\nimport Button from 'react-bootstrap/Button';\r\nimport NavBar from './components/NavBar/NavBar';\r\nimport { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom';\r\nimport HomeScreen from './screens/HomeScreen/HomeScreen';\r\nimport ContactScreen from './screens/ContactScreen/ContactScreen';\r\nimport HistoryScreen from './screens/HistoryScreen/HistoryScreen';\r\nimport LoginScreen from './screens/LoginScreen/LoginScreen';\r\nimport { ICompanyData, HistoryResponse } from './types';\r\nimport { SiteContext } from './context';\r\nimport { Form } from 'react-bootstrap/lib/Navbar';\r\nimport Register from './screens/Register/Register';\r\nimport { Container } from 'react-bootstrap';\r\nimport auth from \"./class/Auth/Auth\";\r\nimport cookie from \"./class/Cookie/Cookie\";\r\nconst base =    cookie.GetCookies(\"base\");\r\n\r\nfunction App() {\r\n  const [userSessionHistoryCompanies, setHistoryCompanies] = useState<ICompanyData[]>([]);\r\n  const [companies, setCompanies] = useState<ICompanyData[]>([]);\r\n  const [companyVAT, SetInputVat] = useState<string[]>([]);\r\n  const [vatArray, setVatArray] = useState<string[]>([]);\r\n  const [companyInfo, setCompanyInfo] = useState<ICompanyData[]>([]);\r\n  const [loggedin, setAuth] = useState<boolean>(false);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [search, setSearch] = useState<string>(\"\");\r\n\r\n  const setSearchHistory = (search:string)=>{\r\n  \r\n      setSearch(search);\r\n  }\r\n\r\n  const submitButtonCompareForm: MouseEventHandler<HTMLButtonElement> = (event)=>{\r\n    event.preventDefault();\r\n    SetInputVat(vatArray);\r\n    setVatArray([]);\r\n  }\r\n\r\n\r\n\r\n  const HistoryCall= async () => {\r\n    \r\n   \r\n    try {\r\n      setLoading(true)\r\n    \r\n    \r\n      let url = `${base}/api/history/history/all`;\r\n    \r\n      if(search.length > 0 ) url = `${base}/api/history/${search}/history`;\r\n     \r\n      let response = await fetch(url, {\r\n          method: 'GET',\r\n          headers: {\r\n              'content-type': 'application/json',\r\n              'Access-Control-Allow-Origin': '*',\r\n              'Authorization': `Bearer ${cookie.GetCookies(\"token\")}`\r\n          }\r\n      });\r\n\r\n      auth.destroy(response.status);\r\n \r\n      const data  =  await response.json();\r\n      return data\r\n\r\n      \r\n  } catch (error) {\r\n      console.log(error)  \r\n    \r\n    \r\n    }\r\n   }\r\n\r\n   useEffect(() => {\r\n\r\n  if(cookie.GetCookies(\"base\") == \"\"){\r\n\r\n    cookie.SetCookie(\"base\",\"https://localhost:44391\",2)\r\n    cookie.SetCookie(\"checkBase\",\"flase\",2);\r\n    cookie.DeleteCookie(\"auth\")\r\n    cookie.DeleteCookie(\"token\")\r\n\r\n  }\r\n\r\n\r\n\r\nif(auth.Auth()){\r\n  \r\n  HistoryCall().then((e:HistoryResponse)=>{\r\n    if(e.sendOBJ != null){\r\n     setHistoryCompanies(e.sendOBJ.history);\r\n            setLoading(false)\r\n            console.log(loading);\r\n    }}\r\n    \r\n    )\r\n\r\n}\r\n\r\n  \r\n  }, [loggedin,search]);\r\n\r\nlet vat = '123' \r\n\r\n\r\n\r\n  return (\r\n    <SiteContext.Provider value={{companies:companies}}>\r\n      <div className={`${styles.App}`}>\r\n        <BrowserRouter>\r\n\r\n        <NavBar/>\r\n        <Container>\r\n            <Switch>\r\n              <Route path=\"/home\" exact >\r\n                <HomeScreen  vatArray = {vatArray} setVatArray = {setVatArray} submit = {submitButtonCompareForm} companyVAT = {companyVAT} companyInfo = {companyInfo} setCompanyInfo = {setCompanyInfo} userSessionHistoryCompanies = {userSessionHistoryCompanies} />\r\n              </Route>\r\n              <Route path=\"/contact\" exact>\r\n                <ContactScreen userSessionHistoryCompanies={userSessionHistoryCompanies} />\r\n              </Route>\r\n              <Route path=\"/UserHistory\" exact>\r\n                <HistoryScreen userSessionHistoryCompanies={userSessionHistoryCompanies} setHistoryCompanies= {setHistoryCompanies} setSearch={setSearchHistory}/>\r\n              </Route>\r\n              <Route path=\"/Login\" exact>\r\n                <LoginScreen setAuth={setAuth} loggedin = {loggedin} />\r\n              </Route>\r\n              <Route path=\"/register\" exact>\r\n                <Register />\r\n              </Route>\r\n              <Route exact path=\"/\">\r\n                <Redirect to=\"/home\" />\r\n            </Route>\r\n            </Switch>\r\n          </Container>\r\n        </BrowserRouter>\r\n\r\n      </div>\r\n    </SiteContext.Provider>\r\n  );\r\n}\r\n//commentje\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}