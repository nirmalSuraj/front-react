{"ast":null,"code":"import _slicedToArray from\"C:/Users/Nirma/data/ap_2021_2022/it-project/ProjectAp2022/it-project-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import cookie from\"../../class/Cookie/Cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var base=cookie.GetCookies(\"base\");var Logout=function Logout(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),err=_useState2[0],setErr=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),success=_useState4[0],setsuccess=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errString=_useState6[0],setErrString=_useState6[1];var send=function send(event){event.preventDefault();console.log();fetch(base+\"/api/Auth/loginout\",{method:'GET',// *GET, POST, PUT, DELETE, etc.\nmode:'cors',// no-cors, *cors, same-origin\n// cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached,\ncredentials:\"same-origin\",headers:{'Content-Type':'application/json',\"Access-Control-Allow-Origin\":\"*\",\"Access-Control-Allow-Headers\":\"Content-Type, Depth, User-Agent, X-File-Size, X-Requested-With, If-Modified-Since, X-File-Name, Cache-Control\",\"Access-Control-Allow-Methods\":\"OPTIONS, GET, POST\"}}).then(function(e){return e.json();}).then(function(e){console.log(e);if(e.hasError||typeof e.errors==\"object\"){var hold=[];if(typeof e.errors==\"object\"){for(var _i=0,_Object$entries=Object.entries(e.errors);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];hold.push(\"-\"+key+\": \"+value);}}else{hold.push(e.error);}setErr(true);setErrString(hold);}else{setErr(false);}if(!e.hasError&&e.errors===undefined){//auth.destroy();\ncookie.DeleteCookie(\"auth\");cookie.DeleteCookie(\"token\");setsuccess(true);window.location.reload();}else{setsuccess(false);}}).catch(function(err){return console.log(err);});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:send,children:\"Log out\"})});};export default Logout;","map":{"version":3,"names":["useState","cookie","base","GetCookies","Logout","err","setErr","success","setsuccess","errString","setErrString","send","event","preventDefault","console","log","fetch","method","mode","credentials","headers","then","e","json","hasError","errors","hold","Object","entries","key","value","push","error","undefined","DeleteCookie","window","location","reload","catch"],"sources":["C:/Users/Nirma/data/ap_2021_2022/it-project/ProjectAp2022/it-project-frontend/src/components/Logout/LogoutButton.tsx"],"sourcesContent":["import { ChangeEventHandler, MouseEventHandler, useReducer, useState } from \"react\";\r\nimport cookie from \"../../class/Cookie/Cookie\";\r\nimport ILoginUser from \"../../interface/ILoginForm/ILoginUser\";\r\nimport Alert from \"../Alert/Alert\";\r\nimport auth from \"../../class/Auth/Auth\";\r\nconst base =    cookie.GetCookies(\"base\");\r\nconst Logout=()=>{\r\n\r\n    const [err,setErr] = useState<boolean>(false);\r\n    const [success,setsuccess] = useState<boolean>(false);\r\n    const [errString,setErrString] = useState<string[]>([]);\r\n\r\n\r\n\r\n      const send :MouseEventHandler<HTMLButtonElement> = (event)=>{\r\n        event.preventDefault()\r\n        console.log()\r\n            fetch(base+\"/api/Auth/loginout\",{\r\n             \r\n                    method: 'GET', // *GET, POST, PUT, DELETE, etc.\r\n                    mode: 'cors', // no-cors, *cors, same-origin\r\n                   // cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached,\r\n                   credentials:\"same-origin\",\r\n                   headers: {\r\n                    'Content-Type': 'application/json',\r\n                    \"Access-Control-Allow-Origin\": \"*\",\r\n                    \"Access-Control-Allow-Headers\": \"Content-Type, Depth, User-Agent, X-File-Size, X-Requested-With, If-Modified-Since, X-File-Name, Cache-Control\",\r\n                    \"Access-Control-Allow-Methods\": \"OPTIONS, GET, POST\"\r\n\r\n                  },\r\n                    \r\n            }).then(e=>e.json())\r\n            .then(e => {\r\n                \r\n                console.log(e)\r\n                if(e.hasError || typeof e.errors == \"object\"){\r\n\r\n                    let hold = [];\r\n                    if(typeof e.errors == \"object\"){\r\n                    for (const [key, value] of Object.entries(e.errors)) {\r\n                       hold.push(\"-\"+key+\": \"+value);\r\n                    }                   \r\n                 }else{\r\n                    hold.push(e.error );\r\n                 }\r\n                    \r\n                    setErr(true)\r\n\r\n                    setErrString(hold);\r\n                    \r\n\r\n\r\n                }else{\r\n                    setErr(false)\r\n                }\r\n\r\n                if(!e.hasError && e.errors === undefined){\r\n                    //auth.destroy();\r\n                    cookie.DeleteCookie(\"auth\")\r\n                    cookie.DeleteCookie(\"token\")\r\n                    setsuccess(true)\r\n                    window.location.reload();\r\n                }else{\r\n                    setsuccess(false)\r\n                }\r\n            })\r\n            .catch(err=> console.log(err))\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return(\r\n\r\n        <>\r\n\r\n                        <button type=\"submit\" className=\"btn btn-primary\" onClick={send}>Log out</button>\r\n\r\n        \r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default Logout;"],"mappings":"mKAAA,OAA4DA,QAA5D,KAA4E,OAA5E,CACA,MAAOC,CAAAA,MAAP,KAAmB,2BAAnB,C,gGAIA,GAAMC,CAAAA,IAAI,CAAMD,MAAM,CAACE,UAAP,CAAkB,MAAlB,CAAhB,CACA,GAAMC,CAAAA,MAAM,CAAC,QAAPA,CAAAA,MAAO,EAAI,CAEb,cAAqBJ,QAAQ,CAAU,KAAV,CAA7B,wCAAOK,GAAP,eAAWC,MAAX,eACA,eAA6BN,QAAQ,CAAU,KAAV,CAArC,yCAAOO,OAAP,eAAeC,UAAf,eACA,eAAiCR,QAAQ,CAAW,EAAX,CAAzC,yCAAOS,SAAP,eAAiBC,YAAjB,eAIE,GAAMC,CAAAA,IAA0C,CAAG,QAA7CA,CAAAA,IAA6C,CAACC,KAAD,CAAS,CAC1DA,KAAK,CAACC,cAAN,GACAC,OAAO,CAACC,GAAR,GACIC,KAAK,CAACd,IAAI,CAAC,oBAAN,CAA2B,CAExBe,MAAM,CAAE,KAFgB,CAET;AACfC,IAAI,CAAE,MAHkB,CAGV;AACf;AACAC,WAAW,CAAC,aALa,CAMzBC,OAAO,CAAE,CACR,eAAgB,kBADR,CAER,8BAA+B,GAFvB,CAGR,+BAAgC,+GAHxB,CAIR,+BAAgC,oBAJxB,CANgB,CAA3B,CAAL,CAcGC,IAdH,CAcQ,SAAAC,CAAC,QAAEA,CAAAA,CAAC,CAACC,IAAF,EAAF,EAdT,EAeCF,IAfD,CAeM,SAAAC,CAAC,CAAI,CAEPR,OAAO,CAACC,GAAR,CAAYO,CAAZ,EACA,GAAGA,CAAC,CAACE,QAAF,EAAc,MAAOF,CAAAA,CAAC,CAACG,MAAT,EAAmB,QAApC,CAA6C,CAEzC,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACA,GAAG,MAAOJ,CAAAA,CAAC,CAACG,MAAT,EAAmB,QAAtB,CAA+B,CAC/B,6BAA2BE,MAAM,CAACC,OAAP,CAAeN,CAAC,CAACG,MAAjB,CAA3B,gCAAqD,CAAhD,6DAAOI,GAAP,uBAAYC,KAAZ,uBACFJ,IAAI,CAACK,IAAL,CAAU,IAAIF,GAAJ,CAAQ,IAAR,CAAaC,KAAvB,EACF,CACH,CAJE,IAIE,CACFJ,IAAI,CAACK,IAAL,CAAUT,CAAC,CAACU,KAAZ,EACF,CAEE1B,MAAM,CAAC,IAAD,CAAN,CAEAI,YAAY,CAACgB,IAAD,CAAZ,CAIH,CAjBD,IAiBK,CACDpB,MAAM,CAAC,KAAD,CAAN,CACH,CAED,GAAG,CAACgB,CAAC,CAACE,QAAH,EAAeF,CAAC,CAACG,MAAF,GAAaQ,SAA/B,CAAyC,CACrC;AACAhC,MAAM,CAACiC,YAAP,CAAoB,MAApB,EACAjC,MAAM,CAACiC,YAAP,CAAoB,OAApB,EACA1B,UAAU,CAAC,IAAD,CAAV,CACA2B,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACH,CAND,IAMK,CACD7B,UAAU,CAAC,KAAD,CAAV,CACH,CACJ,CAhDD,EAiDC8B,KAjDD,CAiDO,SAAAjC,GAAG,QAAGS,CAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ,CAAH,EAjDV,EAkDL,CArDD,CA6DF,mBAEI,sCAEgB,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,CAAkD,OAAO,CAAEM,IAA3D,qBAFhB,EAFJ,CAUH,CA/ED,CAiFA,cAAeP,CAAAA,MAAf"},"metadata":{},"sourceType":"module"}